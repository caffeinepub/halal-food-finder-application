{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-07T11:00:42.100Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 3,
    "implemented": 2,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Reduce perceived instability in location detection and tracking by preventing conflicting location workflows and by throttling/reducing noisy updates.\n\nContext: The app supports one-time GPS detection (with GPS->IP fallback) and continuous tracking via `watchPosition`. Users report that “web site location unstable”.\n\nImplement the following behaviors:\n- If continuous tracking is active, disable or clearly gate the one-time “Detect My Location” flow so the two mechanisms do not compete.\n- Add throttling/debouncing to continuous tracking-triggered searches so location-based searches are not triggered too frequently even when coordinates jitter; keep the existing “significant change” check but also enforce a minimum time interval between searches.\n- Reduce user-facing noise: avoid firing a success toast on every tracking update; only toast on tracking start/stop and on meaningful state changes (e.g., first fix acquired, permission denied, tracking error).\n- Ensure tracking can recover cleanly from transient errors: if `watchPosition` emits a TIMEOUT/POSITION_UNAVAILABLE error, reflect it in UI state without leaving the app stuck in an in-flight state, and allow the user to stop/restart tracking.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/SearchSection.tsx",
          "frontend/src/hooks/useGeolocationWatch.ts",
          "frontend/src/lib/rateLimit.ts"
        ],
        "matchedFiles": [
          "frontend/src/components/SearchSection.tsx",
          "frontend/src/hooks/useGeolocationWatch.ts",
          "frontend/src/lib/rateLimit.ts"
        ]
      },
      {
        "id": "REQ-2",
        "summary": "Restore and harden the visit counter so it is visible even when backend calls fail, and provide a clear fallback UI.\n\nContext: `App.tsx` fetches `totalVisits` via `useTrafficCounter()` and passes values to `Footer`, but the footer currently hides the counter entirely when `counterError` is true.\n\nImplement the following:\n- Always render a “Total visits” row in the footer. If the counter fails, show a non-blocking fallback such as “Total visits: unavailable” (English text).\n- Add a lightweight retry strategy on the frontend for the counter fetch/increment (e.g., one retry after a short delay) so transient actor/network failures in production don’t permanently hide the counter for the session.\n- Keep the rest of the app functional even if the counter fails (no hard errors).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/Footer.tsx",
          "frontend/src/hooks/useTrafficCounter.ts"
        ],
        "matchedFiles": [
          "frontend/src/components/Footer.tsx",
          "frontend/src/hooks/useTrafficCounter.ts"
        ]
      },
      {
        "id": "REQ-3",
        "summary": "Persist the page view counter across future backend upgrades.\n\nContext: `backend/main.mo` stores `pageViews` in a non-stable variable, which will reset on canister upgrade.\n\nUpdate the backend so:\n- The page view counter value is stored in stable canister state so it survives future upgrades.\n- `incrementPageViews()` and `getPageViews()` continue to work with the same signatures.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/components/Footer.tsx",
    "frontend/src/components/SearchSection.tsx",
    "frontend/src/hooks/useGeolocationWatch.ts",
    "frontend/src/hooks/useTrafficCounter.ts",
    "frontend/src/lib/rateLimit.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}